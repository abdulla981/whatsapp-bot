from flask import Flask, request
from twilio.twiml.messaging_response import MessagingResponse
import openai

app = Flask(__name__)
openai.api_key = "YOUR_OPENAI_API_KEY"

RESPONSE_MAP = {
    "ุทุงูุจ": "ุฃุฑุณู ุฑูู ุงูุฎุฏูุฉ ูู 1 ุฅูู 10ุ ุญุณุจ ูุง ุชุญุชุงุฌ ููุณุงุนุฏ ุทุงูุจ ๐.",
    "ููุธู": "ุฃุฑุณู ุฑูู ุงูุฎุฏูุฉ ูู 1 ุฅูู 10ุ ุญุณุจ ูุง ุชุญุชุงุฌ ููุณุงุนุฏ ููุธู ๐ผ.",
    "1": "๐ง ุชู ุฅุนุฏุงุฏ ุฅูููู ุฑุณูู (ุงุนุชุฑุงุถ ููุทุงูุจ).",
    "2": "๐ ุชู ุชุฌููุฒ ุฌุฏูู ูุฐุงูุฑุฉ ููุงุณุจ.",
    "3": "โ ุชู ุชุณุฌูู ุงุณุชูุณุงุฑู ุงูุฃูุงุฏููู.",
    "4": "๐ค ุฃุฑุณู ุงููุต ุงููุทููุจ ุชุฑุฌูุชู.",
    "5": "๐ ุชู ุชุฌููุฒ ุทูุจ ุฃู ุดููู.",
    "6": "๐ง ุชู ุฅุนุฏุงุฏ ุฅูููู ุฑุณูู (ููููุธู).",
    "7": "๐ ุชู ุชุฌููุฒ ุฌุฏูู ููุงู ุงูุนูู.",
    "8": "๐ ุชู ุฅุนุฏุงุฏ ุนุฐุฑ ุฑุณูู.",
    "9": "๐ ุชู ุชุฌููุฒ ุณูุฑุฉ ุฐุงุชูุฉ.",
    "10": "๐ง ุฃุฑุณู ุชูุงุตูู ุงููููุฉ ูุณุฃุณุงุนุฏู ูููุง.",
}

WELCOME_MESSAGE = "๐ ูุฑุญุจุงู ุจู ูู ูุณุงุนุฏู ุงูุฐูู ุนุจุฏุงููู! ูู ุฃูุช ุทุงูุจ ุฃู ููุธูุ"

@app.route("/bot", methods=["POST"])
def bot():
    incoming_msg = request.values.get('Body', '').strip()
    resp = MessagingResponse()
    msg = resp.message()

    reply = RESPONSE_MAP.get(incoming_msg)

    if not reply:
        reply = WELCOME_MESSAGE

    msg.body(reply)
    return str(resp)
